# Munin - Artsregistreringsapp

## ðŸ¤– AI Samarbeidsinstruksjoner

### Kommunikasjon med AI
- Jeg bruker AI for all koding og implementering
- Jeg kan grunnleggende feilsÃ¸king (missing components, syntax errors)
- Jeg foretrekker tydelig markering av hva som skal endres vs. beholdes i koden
- Ved stÃ¸rre endringer, vis fÃ¸r/etter eller marker tydelig hva som skal fjernes/legges til

### Kodeformatering
NÃ¥r deler av en fil skal endres, vis kontekst slik:
```javascript
// SpeciesPopup forblir uendret...
const SpeciesPopup = ({ /* ... */ }) => { /* ... */ };

// ExportButton forblir uendret...
const ExportButton = ({ /* ... */ }) => { /* ... */ };

// Dette er den nye koden som skal implementeres
const UpdatedComponent = ({ prop1, prop2 }) => {
  // Ny implementasjon her
};
```

## ðŸ›  Teknisk Oppsett

### Styling
- PrimÃ¦rt Tailwind CSS for styling
- Unntak:
  - Leaflet-relaterte komponenter (MapComponent etc.) beholder inline styles
  - Dynamiske styles (posisjonsbasert, fargeberegning etc.)
  - SVG-manipulasjon
- Square bracket notation brukes for spesielle CSS-egenskaper
- Styling konfigurasjon:
  ```
  /
  â”œâ”€â”€ postcss.config.js
  â”œâ”€â”€ tailwind.config.js
  â””â”€â”€ src/
      â””â”€â”€ styles/
          â”œâ”€â”€ global.css   # Globale Tailwind imports
          â””â”€â”€ modules/     # Modul-spesifikke styles
              â””â”€â”€ leaflet.module.css
  ```

### React Setup
- Moderne React med function components og hooks
- Komponentstruktur:
  ```
  /src
  â”œâ”€â”€ components/
  â”‚   â”œâ”€â”€ AppInterface/    # Hovedcontainer og layout
  â”‚   â”œâ”€â”€ auth/           # Autentisering og bruker
  â”‚   â”œâ”€â”€ forms/          # Registreringsskjemaer
  â”‚   â”œâ”€â”€ map/           # Kartrelaterte komponenter
  â”‚   â”œâ”€â”€ overlays/      # Modal og popup komponenter
  â”‚   â””â”€â”€ InstallPrompt/  # PWA-installasjon
  ```

### State Management
- Custom hooks for global state (useAppState)
- Context for delt state mellom komponenter
- IndexedDB for lokal datalagring
- Optimalisert rendering med useMemo og useCallback
- Eventbasert kommunikasjon for kritiske oppdateringer

### Dataflyt
- Lokal lagring i IndexedDB
- Synkronisering med skylagring
- Offline-first arkitektur
- Brukerautentisering med MongoDB
- Effektiv bildehÃ¥ndtering med komprimering

## ðŸ“± Hovedkomponenter

### Kartvisning
- Leaflet-basert med custom kontroller
- Clustering for effektiv markÃ¸rhÃ¥ndtering
- Buffer-visualisering for nÃ¸yaktighet
- Interaktive popups med artsinfo

### Registrering
- Progressiv utfylling
- GPS og manuell posisjonering
- BildehÃ¥ndtering med forhÃ¥ndsvisning
- Offline stÃ¸tte

### Oversikt og Administrasjon
- Hierarkisk visning (lokalitet > registreringer)
- Batch-operasjoner (sletting, eksport)
- Avansert filtrering og sortering
- Excel-eksport funksjonalitet

## ðŸ“Œ Viktige Tekniske Notater
- JSX-dokumentasjon kreves for alle komponenter
- Konsistent styling-strategi med Tailwind
- Tydelig error handling og logging
- Optimalisert for mobil ytelse
- PWA-funksjonalitet med offline stÃ¸tte